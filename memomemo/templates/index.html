{% extends "layout.html" %}


{% block head %}
<script type="text/javascript" src="{{ url_for('static', filename='js/cumulus.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/marked.min.js') }}"></script>
<link rel=stylesheet type=text/css href="{{ url_for('static', filename='css/index.css') }}">
<script type="text/javascript" src="{{ url_for('static', filename='js/socket.io-0.9.16.js') }}"></script>
<link rel="stylesheet" href="{{ url_for('static', filename='css/solarized_dark.css') }}">
<script src="{{ url_for('static', filename='js/highlight.pack.js') }}"></script>
{% endblock %}

{% if session.user_id %}
{% block metanav%}
	<span class='fa fa-bars fa-2x'></span>
	<!--<span class='fa fa-info-circle fa-2x' id='setting'></span>-->
	<!--<a class='fa fa-power-off fa-2x' href="{{ url_for('logout') }}" style='color: red; opacity: 0.8;'></a>-->
	<div id='setting-container setting hidden'>
		<div class='setting hidden'>
			<h2>User</h2>
			<ul>
				<li><b>ID: </b><span id='user_id'>{{ id }}</span>
				<li><b>Name: </b>{{ name }}
			</ul>
		</div>
		<div class='setting hidden'>
			<h2>Memo</h2>
			<ul>
				<li><b>Num: </b>{{ memo_num }}
				<li><b>TagNum: </b>{{ tag_num }}
		</div>
	</div>
{% endblock %}
{% endif %}

{% block body %}

<script type="text/javascript" src="{{ url_for('static', filename='js/index.js') }}"></script>

{% if session.user_id %}
<!--Cumulusjs-->
<script type="text/javascript">
	var tags = [];
	{% for tag in tags %}
	tags.push(new Tag("{{ tag['name'] }}", "{{ tag['size'] }}", "", {color: "{{ tag['color'] }}"}));
	{% endfor %}
	var tagCloud = new TagCloud(tags, 600, 600); 
</script>
<!--Side Menu-->
<div class="menu-ui">
	<!--addentry-div-->
	<div class="menu addentry-div dialogbtn">
		<a class="icon fa fa-pencil fa-2x showdlg" style='top: 3px; left: 6px;' href="#entrydlg"></a>
	</div>
	<!--search-div-->
	<div class="menu search-div dialogbtn">
		<a class="icon fa fa-search fa-2x showdlg" style='top: 3px; left: 5px;' href="#searchdlg"></a>
	</div>
	<!--cumulunimbus-div-->
	<div class="menu cumulunimbus-div dialogbtn">
		<a class="icon fa fa-cloud fa-2x showdlg" style='top: 4px; left: 3px;' href="#cumulusdlg"></a>
	</div>
	<!--tagcloud-div-->
	<div class="menu tagcloud-div dialogbtn">
		<a class="icon fa fa-tags fa-2x showdlg" style='top: 5px; left: 4px;' href="#tagdlg"></a>
	</div>
</div>

<!--Dialog-->
<div id="entrydlg" class="dialog">
	<a href="#entrydlg" class="fa fa-times fa-3x closedlg"></a>
	<h1>Edit</h1>
	<div id="edit-menu">
		<div class="paser-switch">
			<label class='paser-label' id="rest" for="rest">ReST</label>
			<label class='paser-label' id="mkd" for="mkd">Markdown</label>
		</div>
		<div class="clear-btn">
			<span class="fa fa-times"></span><span>Clear</span>
		</div>
		<div class="publish-btn">
			<input type="checkbox" id="publish" disabled />
			<label for="publish" id="publish-label">Publish</label>
		</div>
	</div>
	<form onsubmit="return false;" class='addentry-form'>
		<dl>
		   	<dt>Title:
		   	<dd><input type="text" name="title" class="menu-input memo-input-title" placeholder="Title">
		   	<dt>Text:
			<dd><textarea name="text" class="menu-input memo-input-text" placeholder="Text ( Use reStructuredText, but do not use heading! )"></textarea>
			<dt>Tag:
			<dd><input type="text" name="tag" class="menu-input memo-input-tag" placeholder="Tag" list="taglist">
			<dd><input type="button" value="Submit" class="menu-btn commit-button">
			<datalist id="taglist">
				{% for tag in tags %}
				<option value="{{ tag['name'] }}"></option>
				{% endfor %}
			</datalist>
   		</dl>
	</form>
</div>
<div id="searchdlg" class="dialog">
	<a href="#searchdlg" class="fa fa-times fa-3x closedlg"></a>
	<h1>Search</h1>
	<form id="search-form" onsubmit="return false;">
		<input type="text", name="title"  placeholder="Title" class='menu-input'></input>
		<input type="text", name="text"  placeholder="Text" class='menu-input'></input>
		<input type="text", name="tag" placeholder="Tag" class='menu-input'></input>
		<input type="button" value="Submit" class="menu-btn submit-button"></input>
	</form>
</div>
<div id="cumulusdlg" class="dialog">
	<a href="#cumulusdlg" class="fa fa-times fa-3x closedlg"></a>
	<h1>Cumulus</h1>
	<div id="tagCloud"></div>
	<script type="text/javascript">
		tagCloud.Distribute(document.getElementById("tagCloud")).Animate(); 
	</script>
</div>
<div id="tagdlg" class="dialog">
	<a href="#tagdlg" class="fa fa-times fa-3x closedlg"></a>
	<h1>TagCloud</h1>
	<div id="tag-container">
		{% for tag in tags %}
		<span class='tag' style='border: 2px solid {{ tag['color'] }};'><i>{{ tag['name'] }}</i>:{{ tag['num'] }}</span>
		{% endfor %}
	</div>
</div>

<div style='width: 100%; height: 50px;'></div>
<div id="container"></div>
<div id="loading"><svg id="loading-svg" width="100" height="100"> <rect x="25" y="25" width="25" height="25" fill="#555"> <animateTransform attributeName="transform" attributeType="XML" type="translate" dur="1.5s" repeatCount="indefinite" values="0,0; -15,0; 0,0"/> <animate attributeType="XML" attributeName="fill" dur="1.5s" repeatCount="indefinite" values="#555; #ccc; #555"/> </rect> <rect x="25" y="50" width="25" height="25" fill="#555"> <animateTransform attributeName="transform" attributeType="XML" type="translate" begin="-0.2s" dur="1.5s" repeatCount="indefinite" values="0,0; 0, 15; 0,0"/> <animate attributeType="XML" attributeName="fill" dur="1.5s" repeatCount="indefinite" begin="-0.2s" values="#555; #ccc; #555"/> </rect> <rect x="50" y="25" width="25" height="25" fill="#555"> <animateTransform attributeName="transform" attributeType="XML" type="translate" begin="-0.4s" dur="1.5s" repeatCount="indefinite" values="0,0; 0, -15; 0,0"/> <animate attributeType="XML" attributeName="fill" dur="1.5s" repeatCount="indefinite" begin="-0.4s" values="#555; #ccc; #555"/> </rect> <rect x="50" y="50" width="25" height="25" fill="#555"> <animateTransform attributeName="transform" attributeType="XML" type="translate" begin="-0.6s" dur="1.5s" repeatCount="indefinite" values="0,0; 15, 0; 0,0"/> <animate attributeType="XML" attributeName="fill" dur="1.5s" repeatCount="indefinite" begin="-0.6s" values="#555; #ccc; #555"/> </rect></svg></div>
<div style='width: 100%; height: 50px;'></div>


{% endif %}

{% endblock %}
